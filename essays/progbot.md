# 상향식 프로그래밍 (Programming Bottom-Up)

1993
(이 에세이는 On Lisp 서문에서 발췌되었습니다.)

## 소개

프로그래밍 스타일에는 오랫동안 지켜 내려온 원칙이 있습니다. 바로 프로그램의 기능적 부분은 지나치게 크지 않아야 한다는 것입니다. 프로그램의 어떤 구성 요소라도 쉽게 이해할 수 있는 단계를 넘어서 확장되면, 마치 대도시가 범죄자를 숨기듯 오류를 쉽게 감추는 복잡성의 덩어리가 됩니다. 이런 소프트웨어는 읽기 어렵고, 테스트하기 어려우며, 디버깅하기 어려울 것입니다.

이 원칙에 따라, 큰 프로그램은 여러 조각으로 나누어야 하며, 프로그램이 클수록 더 많이 나누어야 합니다. 프로그램을 어떻게 나눌까요? 전통적인 접근법은 '하향식 설계(top-down design)'라고 불립니다. 즉, "이 프로그램의 목적은 다음 일곱 가지를 하는 것이므로, 일곱 개의 주요 서브루틴으로 나눈다. 첫 번째 서브루틴은 네 가지 일을 해야 하므로, 다시 네 개의 자체 서브루틴을 가질 것이다" 와 같이 진행하는 것입니다. 이 과정은 프로그램 전체가 적절한 세분화 수준에 도달할 때까지 계속됩니다. 즉, 각 부분은 실질적인 일을 할 만큼 충분히 크지만, 단일 단위로 이해하기에는 충분히 작아야 합니다.

## 상향식 설계 (Bottom-Up Design)

숙련된 Lisp 프로그래머들은 프로그램을 다르게 나눕니다. 그들은 하향식 설계뿐만 아니라, '상향식 설계(bottom-up design)'라고 부를 수 있는 원칙을 따릅니다. 이는 문제를 해결하기 위해 언어 자체를 변경하는 것입니다.

Lisp에서는 단순히 프로그램을 언어에 맞춰 작성하는 것이 아니라, 언어를 프로그램에 맞게 구축해 나갑니다. 프로그램을 작성하는 동안 "Lisp에 이런 연산자가 있었으면 좋겠다"라고 생각할 수 있습니다. 그러면 직접 그것을 작성합니다. 나중에 새로운 연산자를 사용하면 프로그램의 다른 부분 설계를 단순화할 수 있다는 것을 깨닫고, 이런 식으로 계속 진행됩니다. 언어와 프로그램은 함께 진화합니다. 마치 전쟁 중인 두 국가의 국경선처럼, 언어와 프로그램 사이의 경계는 그리고 다시 그려지며, 결국 문제의 자연스러운 경계인 산과 강을 따라 안정됩니다. 최종적으로 당신의 프로그램은 마치 해당 프로그램을 위해 언어가 설계된 것처럼 보일 것입니다. 언어와 프로그램이 서로 잘 맞으면, 명확하고 작으며 효율적인 코드를 얻게 됩니다.

상향식 설계가 단순히 다른 순서로 같은 프로그램을 작성하는 것을 의미하는 것은 아니라는 점을 강조할 가치가 있습니다. 상향식으로 작업할 때, 당신은 보통 다른 프로그램을 만들게 됩니다. 단일 구조의 프로그램 대신, 더 많은 추상 연산자를 가진 더 큰 언어를, 그리고 그 언어로 작성된 더 작은 프로그램을 얻게 될 것입니다. 이는 마치 단순한 들보 대신 아치 구조를 만드는 것과 같습니다. 일반적인 코드에서는 단순한 기록 관리 작업으로만 이루어진 부분들을 추상화하고 나면 남는 것은 훨씬 짧습니다. 언어를 높이 쌓아 올릴수록, 위에서 아래로 이동해야 하는 거리가 줄어듭니다.

## 상향식 설계의 이점

이는 여러 이점을 가져다줍니다.

*   **더 작고 유연한 프로그램:** 언어가 더 많은 작업을 수행하게 함으로써, 상향식 설계는 더 작고 유연한 프로그램을 만들어냅니다. 더 짧은 프로그램은 그렇게 많은 구성 요소로 나눌 필요가 없으며, 구성 요소가 적다는 것은 프로그램을 읽거나 수정하기가 더 쉽다는 것을 의미합니다. 구성 요소가 적다는 것은 구성 요소 간의 연결도 적다는 것을 의미하므로, 오류 발생 가능성도 줄어듭니다. 산업 디자이너들이 기계의 작동 부품 수를 줄이려고 노력하는 것처럼, 숙련된 Lisp 프로그래머들은 상향식 설계를 사용하여 프로그램의 크기와 복잡성을 줄입니다.

*   **코드 재사용 촉진:** 두 개 이상의 프로그램을 작성할 때, 첫 번째 프로그램을 위해 작성한 많은 유틸리티가 후속 프로그램에서도 유용할 것입니다. 일단 많은 유틸리티 기반을 확보하면, 원시 Lisp에서 시작해야 하는 노력의 일부만으로도 새 프로그램을 작성할 수 있습니다.

*   **가독성 향상:** 상향식 설계는 프로그램을 더 읽기 쉽게 만듭니다. 이러한 유형의 추상화는 독자에게 범용 연산자를 이해하도록 요구하는 반면, 함수적 추상화는 독자에게 특수 목적의 서브루틴을 이해하도록 요구합니다.[^1]

*   **설계 명료화:** 코드에서 패턴을 끊임없이 찾게 만들기 때문에, 상향식 작업은 프로그램 설계에 대한 아이디어를 명확히 하는 데 도움이 됩니다. 프로그램의 서로 다른 두 구성 요소가 형식상 유사하다면, 당신은 그 유사성을 알아차리고 아마도 프로그램을 더 간단한 방식으로 재설계하게 될 것입니다.

## Lisp와 상향식 설계

다른 언어에서도 어느 정도 상향식 설계는 가능합니다. 라이브러리 함수를 볼 때마다 상향식 설계가 일어나고 있는 것입니다. 하지만 Lisp는 이 분야에서 훨씬 더 광범위한 능력을 제공하며, 언어를 확장하는 것이 Lisp 스타일에 있어 비례적으로 더 큰 역할을 차지합니다. Lisp는 단순히 다른 언어가 아니라 프로그래밍 방식 자체가 다르다고 할 정도입니다.

이러한 개발 스타일이 소규모 그룹이 작성하는 프로그램에 더 적합하다는 것은 사실입니다. 하지만 동시에 이는 소규모 그룹이 할 수 있는 일의 한계를 확장합니다. Frederick Brooks는 그의 저서 "The Mythical Man-Month"에서 프로그래머 그룹의 생산성이 그룹 크기에 따라 선형적으로 증가하지 않는다고 제안했습니다. 그룹 크기가 커질수록 개별 프로그래머의 생산성은 떨어집니다. Lisp 프로그래밍 경험은 이 법칙을 좀 더 긍정적인 방식으로 표현할 수 있음을 시사합니다. 즉, 그룹 크기가 줄어들수록 개별 프로그래머의 생산성은 올라갑니다.

규모가 작은 그룹은 단순히 규모가 작기 때문에 상대적으로 유리합니다. 만약 작은 그룹이 Lisp가 가능하게 하는 기술까지 활용한다면, 압도적으로 승리할 수 있습니다.

---
New: On Lisp 무료 다운로드

[^1]: "하지만 당신의 새로운 유틸리티를 모두 이해하지 못하면 누구도 그 프로그램을 읽을 수 없습니다." 이러한 진술이 보통 잘못된 이유를 보려면 4.8절을 참조하십시오.