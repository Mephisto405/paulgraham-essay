# 반격하는 필터 (Filters that Fight Back)

2003년 8월

베이즈 스팸 필터[^1]의 정확도를 향상시키기 위해, 필터가 링크를 따라가 해당 URL의 실제 내용을 확인하도록 할 수 있습니다. death2spam의 Richard Jowsey는 현재 애매한 경우에 이 방법을 사용하고 있으며, 효과가 좋다고 보고했습니다. 왜 애매한 경우에만 사용하고, 또 한 번만 사용해야 할까요? 제가 '필터가 스팸을 막을 수 있을까?(Will Filters Kill Spam?)'에서 언급했듯이, 스팸에 포함된 모든 URL을 따라가는 것은 흥미로운 부작용을 낳을 것입니다. 만약 인기 있는 이메일 클라이언트들이 스팸 필터를 위해 이 작업을 수행한다면, 스패머의 서버는 심각한 타격을 입게 될 것입니다. 이 아이디어에 대해 더 깊이 생각할수록 더욱 좋은 생각처럼 느껴집니다. 이것은 단순히 재미있는 수준을 넘어, 그보다 더 완벽하게 표적화된 반격은 상상하기 어려울 것입니다.

그래서 스팸 필터 개발자들에게 추가적인 기능을 제안하고 싶습니다: 바로 "'처벌' 모드"입니다. 이 모드를 켜면, 의심스러운 스팸에 포함된 모든 URL을 사용자가 설정한 횟수 n만큼 탐색하도록 합니다.[^1] 많은 사람들이 지적했듯이, 현재 이메일 시스템의 문제점 중 하나는 지나치게 수동적이라는 것입니다. 이메일 시스템은 사용자가 지시하는 대로만 작동합니다. 지금까지 이 문제를 해결하려는 모든 제안은 새로운 프로토콜을 도입하는 방식이었지만, 이 제안은 그렇지 않습니다.

만약 자동으로 스팸 내용을 수집하는 필터(auto-retrieving spam filters)가 널리 사용된다면, 이메일 시스템은 되받아치는 효과를 낼 것입니다. 지금까지 스패머에게 유리하게 작용했던 막대한 스팸 양은 이제 그의 얼굴에 나뭇가지가 휙 꺾여 되돌아오는 것처럼 그에게 불리하게 작용할 것입니다. 자동으로 내용을 가져오는 스팸 필터는 스패머의 비용은 높이고 판매는 낮출 것입니다. 그의 대역폭 사용량은 폭증할 것이고, 서버는 부하로 인해 마비되어 스팸에 응답하려던 사람들에게 접근 불가능하게 될 것입니다. 시간당 백만 개의 이메일을 보내면, 시간당 백만 번의 서버 히트(hit)를 경험하게 될 것입니다.

이것이 의심스러운 스팸에만 적용되도록 해야 합니다. 일반적으로 수백만 명에게 전송되는 모든 URL은 스팸 URL일 가능성이 높으므로, 모든 이메일의 모든 HTTP 요청을 처리하는 것은 거의 항상 잘 작동할 것입니다. 하지만 그렇지 않은 몇 가지 경우가 있습니다. 예를 들어, Yahoo Mail이나 Hotmail과 같은 무료 이메일 서비스 하단에 있는 URL들이 그렇습니다.

이러한 사이트를 보호하고 악용을 방지하기 위해, 자동 내용 가져오기 기능은 스팸 광고 사이트의 블랙리스트와 결합되어야 합니다. 블랙리스트에 있는 사이트만 크롤링(crawling)하며, 사이트는 인간에 의해 검토된 후에만 블랙리스트에 포함될 것입니다. 스팸의 수명은 최소 몇 시간이므로, 새로운 사이트를 홍보하는 스팸에 제때 개입하기 위해 이러한 목록을 업데이트하는 것은 쉬워야 합니다. [^2]

대량의 자동 내용 가져오기 기능은 고대역폭 연결을 사용하는 사용자에게만 실용적이겠지만, 스패머에게 심각한 문제를 일으킬 만큼 충분한 사용자가 존재합니다. 실제로 이 해결책은 문제 자체를 그대로 반영합니다. 스팸의 문제는 스패머가 소수의 잘 속는 사람들에게 도달하기 위해 모든 사람에게 이메일을 보낸다는 것입니다. 제대로 속지 않는 수신자들은 단지 부수적인 피해일 뿐입니다. 하지만 대다수의 제대로 속지 않는 사람들은, 속는 사람들이 이에 응답하는 것을 막거나 (또는 막겠다고 위협함으로써) 스팸을 멈추게 할 수 있을 때까지 스팸을 받지 않을 것입니다. 자동으로 내용을 가져오는 스팸 필터는 그들에게 이를 수행할 방법을 제공합니다.

이것이 스팸을 완전히 없앨 수 있을까요? 그렇지는 않을 것입니다. 가장 큰 스패머들은 아마도 자동으로 내용을 가져오는 필터에 대해 서버를 보호할 수 있을 것입니다. 하지만 그들이 할 수 있는 가장 쉽고 저렴한 방법은 이메일에 작동하는 구독 취소 링크를 포함하는 것입니다. 이것이 규모가 작은 스패머나 그들을 홍보하기 위해 스패머를 고용한 "합법적인" 사이트들에게는 필수가 될 것입니다. 따라서 자동으로 내용을 가져오는 필터가 널리 퍼지게 된다면, 그것들은 자동 구독 취소 필터가 될 것입니다.

이 시나리오에서 스팸은 OS 충돌, 바이러스, 팝업과 마찬가지로, 적절한 소프트웨어를 사용하지 않는 사람들에게만 영향을 미치는 골칫거리 중 하나가 될 것입니다.

**감사의 말**

이 글의 초안을 검토해 준 Brian Burton, Bill Yerazunis, Dan Giffin, Eric Raymond, Richard Jowsey에게 감사합니다.

[^1]: 자동으로 내용을 가져오는 필터는 리디렉션(redirects)을 따라야 하며, 일부 경우(예: "여기를 클릭하세요"라고만 말하는 페이지)에는 여러 단계의 링크를 따라가야 합니다. 또한 HTTP 요청이 인기 있는 웹 브라우저의 요청과 구별할 수 없도록, 요청 순서와 리퍼러(referrer) 정보까지 포함해야 합니다. 응답이 x 시간 내에 돌아오지 않으면, 상당히 높은 스팸 확률로 기본 설정해야 합니다. n을 상수로 만들기보다는 해당 사이트를 언급하는 스팸의 수에 대한 함수로 만드는 것이 좋을 수 있습니다. 이렇게 하면 악용 및 사고에 대한 추가적인 보호 수준을 제공할 것입니다.
[^2]: 이 글의 원래 버전에서는 "블랙리스트" 대신 "화이트리스트"라는 용어를 사용했습니다. 작동 방식은 블랙리스트와 같았지만, 법적 공격에 덜 취약하게 만들기 위해 화이트리스트라고 부르기를 선호했습니다. 그러나 이것이 독자들에게 혼란만 준 것 같습니다. 아마도 여러 개의 블랙리스트가 있어야 할 것입니다. 단일 실패 지점(single point of failure)은 공격과 남용 모두에 취약할 것입니다.