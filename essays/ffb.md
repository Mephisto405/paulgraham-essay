# 반격하는 필터 (Filters that Fight Back)

2003년 8월

베이즈 스팸 필터(Bayesian spam filter)의 정확도를 높이기 위해, 필터가 링크를 따라가서 그 링크 끝에 무엇이 있는지 확인하는 방식을 사용할 수 있을 것입니다. Death2spam의 리처드 조시(Richard Jowsey)는 현재 이러한 방식을 경계선상의 경우(borderline cases)에 적용하고 있으며, 효과가 좋다고 보고합니다.

왜 경계선상의 경우에만 적용할까요? 그리고 왜 한 번만 적용할까요? 제가 쓴 '필터가 스팸을 없앨 수 있을까?(Will Filters Kill Spam?)'에서 언급했듯이, 스팸 메일에 포함된 모든 URL을 따라가는 것은 재미있는 부작용을 낳을 것입니다. 만약 인기 있는 이메일 클라이언트가 스팸 필터링을 위해 이 작업을 수행한다면, 스패머의 서버는 심각한 타격을 입을 것입니다. 이 생각을 하면 할수록, 더욱 좋은 아이디어로 보입니다. 이것은 단순히 재미있는 것이 아니라, 스패머에 대한 더욱 완벽하게 표적화된 반격은 상상하기 어려울 정도입니다.

그래서 스팸 필터를 개발하는 사람들에게 한 가지 추가 기능을 제안하고 싶습니다. 바로 '처벌(punish)' 모드입니다. 이 모드를 켜면 의심스러운 스팸 메일 안의 모든 URL을 사용자 설정에 따라 n번 스파이더링(spidering)하는 것입니다.[1]

많은 사람이 지적했듯이, 현재 이메일 시스템의 문제점 중 하나는 너무 수동적이라는 것입니다. 시키는 대로만 합니다. 지금까지 문제를 해결하기 위한 모든 제안은 새로운 프로토콜(protocol)과 관련되어 있는 것 같습니다. 하지만 이 제안은 그렇지 않습니다.

만약 자동 회수(auto-retrieving) 스팸 필터가 널리 사용된다면, 이메일 시스템은 반등할 것입니다. 지금까지 스패머에게 유리하게 작용했던 막대한 스팸 양은 이제 스패머에게 불리하게 작용할 것입니다. 마치 나뭇가지가 얼굴을 때리듯이 말이죠. 자동 회수 스팸 필터는 스패머의 비용을 올리고, 매출을 낮출 것입니다. 대역폭(bandwidth) 사용량은 천정부지로 치솟고, 서버는 부하로 인해 작동을 멈출 것입니다. 이는 스팸에 응답했을 잠재 고객들이 서버에 접속할 수 없게 만들 것입니다.

시간당 100만 통의 이메일을 발송하면, 시간당 100만 번의 서버 접속이 발생할 것입니다.

우리는 이것이 의심스러운 스팸에 대해서만 이루어지도록 해야 합니다. 일반적으로 수백만 명에게 전송된 URL은 스팸 URL일 가능성이 높으므로, 모든 이메일에 있는 모든 HTTP 요청을 제출하는 것은 거의 항상 잘 작동할 것입니다. 하지만 그렇지 않은 몇 가지 경우가 있습니다. 예를 들어, 야후 메일(Yahoo Mail)이나 핫메일(Hotmail)과 같은 무료 이메일 서비스에서 보낸 메일 하단의 URL들입니다.

이러한 사이트를 보호하고 남용을 방지하기 위해, 자동 회수는 스팸 광고 사이트의 블랙리스트(blacklist)와 결합되어야 합니다. 블랙리스트에 있는 사이트만 크롤링(crawl)되며, 사이트는 사람의 검사를 거친 후에야 블랙리스트에 추가될 것입니다. 스팸의 수명은 적어도 몇 시간은 되어야 하므로, 새로운 사이트를 홍보하는 스팸을 방해하기 위해 이 목록을 제때 업데이트하는 것은 쉬울 것입니다.[2]

대용량 자동 회수는 고대역폭 연결을 사용하는 사용자에게만 실용적일 것입니다. 하지만 스패머에게 심각한 문제를 일으킬 만큼 충분히 많은 사용자가 있습니다. 실제로 이 해결책은 문제 자체를 정확히 반영합니다. 스팸의 문제는 소수의 쉽게 속는 사람들에게 도달하기 위해 스패머가 모든 사람에게 메일을 보낸다는 것입니다. 쉽게 속지 않는 수신자들은 단지 부수적인 피해일 뿐입니다. 하지만 쉽게 속지 않는 대다수는 쉽게 속는 사람들이 스팸에 응답하는 것을 막을(또는 막겠다고 위협할) 수 있을 때까지 스팸을 계속 받을 것입니다. 자동 회수 스팸 필터는 그들에게 이를 수행할 방법을 제공합니다.

이것이 스팸을 완전히 없앨 수 있을까요? 그렇지는 않습니다. 가장 큰 스패머들은 자동 회수 필터로부터 서버를 보호할 수 있을 것입니다. 그러나 그들이 이를 수행하는 가장 쉽고 저렴한 방법은 메일에 작동하는 구독 취소 링크를 포함하는 것입니다. 그리고 이것은 소규모 스패머나 자신을 홍보하기 위해 스패머를 고용한 '합법적인' 사이트에는 필수적인 것이 될 것입니다. 따라서 자동 회수 필터가 널리 퍼지면, 이들은 자동 구독 취소 필터가 될 것입니다.

이러한 시나리오에서 스팸은 운영체제(OS) 충돌, 바이러스(virus), 팝업(popup)처럼 올바른 소프트웨어(software)를 사용하지 않는 사람들에게만 발생하는 골칫거리가 될 것입니다.

**참고**

[1] 자동 회수 필터는 리다이렉트(redirect)를 따라가야 하며, 경우에 따라서는 (예: 단순히 "여기를 클릭하세요"라고만 표시된 페이지) 한 단계 이상의 링크를 따라가야 합니다. 또한 HTTP 요청이 인기 있는 웹 브라우저의 요청과 구별할 수 없도록, 순서와 리퍼러(referrer)까지 동일하게 만들어야 합니다. 응답이 x 시간 내에 돌아오지 않으면, 상당히 높은 스팸 확률로 기본값을 설정해야 합니다. n을 상수로 두기보다는, 해당 사이트를 언급한 스팸의 수에 비례하도록 만드는 것이 좋은 생각일 수 있습니다. 이는 남용과 사고로부터 추가적인 보호 수준을 더할 것입니다.

[2] 이 글의 초기 버전에서는 '블랙리스트' 대신 '화이트리스트(whitelist)'라는 용어를 사용했습니다. 비록 블랙리스트처럼 작동하도록 의도했지만, 법적 공격에 덜 취약하게 만들 수 있다는 생각에 화이트리스트라고 부르는 것을 선호했습니다. 하지만 이것이 독자들을 혼란스럽게 한 것 같습니다. 아마도 여러 개의 블랙리스트가 있어야 할 것입니다. 단일 실패 지점(single point of failure)은 공격과 남용 모두에 취약할 것입니다.

이 글의 초고를 읽어주신 브라이언 버튼(Brian Burton), 빌 예라주니스(Bill Yerazunis), 댄 기핀(Dan Giffin), 에릭 레이먼드(Eric Raymond), 리처드 조시에게 감사드립니다.